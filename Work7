#include <stdio.h>
#include <ctype.h>
#include <stdbool.h>

bool isPrime(int n) { // проверка простого числа
    if(n <= 1) return false;
    for(int i = 2; i*i <= n; ++i) {
        if(n%i == 0) return false;
    }
    return true;
}

char* transformString(char str[]) {
    char vowels[] = {'a', 'e', 'i', 'o', 'u'};
    bool vowelFlag = false;
    
    for(size_t i = 0; str[i]; ++i) {
        if(i % 2 == 0 && !vowelFlag) { // четная позиция (начиная с нуля)
            for(size_t j = 0; vowels[j]; ++j) {
                if(str[i] == vowels[j]) {
                    str[i] = toupper(str[i]);
                    break;
                }
            }
        }
        
        if(isPrime(i)) { // простая позиция
            if(!isdigit(str[i])) {
                str[i] = tolower(str[i]); // опускаем регистр согласных букв
            }
        }
    }
    
    return str;
}

int main() {
    char inputStr[100];
    printf("Введите строку: ");
    fgets(inputStr, sizeof(inputStr), stdin); // читаем строку
    inputStr[strlen(inputStr)-1] = '\\0';      // удаляем символ перевода строки (\\n)
    
    transformString(inputStr);
    printf("Преобразованная строка: %s\\n", inputStr);
    
    return 0;
}
